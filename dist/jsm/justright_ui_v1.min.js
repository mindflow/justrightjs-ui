import{Logger as t,TimePromise as e,ObjectFunction as s,PropertyAccessor as n}from"./coreutil_v1.js";import{ComponentFactory as i,EventRegistry as o,CanvasStyles as r,CanvasRoot as a,HTML as l,InputElementDataBinding as c,EmailValidator as h,RequiredValidator as u,PhoneValidator as d,PasswordValidator as p,EqualsPropertyValidator as g,AndValidatorSet as E}from"./justright_core_v1.js";import{InjectionPoint as m}from"./mindi_v1.js";class w{constructor(){}withClickListener(t){return this.clickListener=t,this}withKeyUpListener(t){return this.keyUpListener=t,this}withEnterListener(t){return this.enterListener=t,this}withBlurListener(t){return this.blurListener=t,this}withChangeListener(t){return this.changeListener=t,this}withFocusListener(t){return this.focusListener=t,this}callClick(t){this.callListener(this.clickListener,t)}callKeyUp(t){this.callListener(this.keyUpListener,t)}callEnter(t){this.callListener(this.enterListener,t)}callBlur(t){this.callListener(this.blurListener,t)}callChange(t){this.callListener(this.changeListener,t)}callFocus(t){this.callListener(this.focusListener,t)}callListener(t,e){null!=t&&t.call(e)}}class L{static get SIZE_DEFAULT(){return"size-default"}static get SIZE_SMALL(){return"size-small"}static get SIZE_MEDIUM(){return"size-medium"}static get SIZE_LARGE(){return"size-large"}static get SHAPE_DEAFULT(){return"shape-default"}static get SHAPE_ROUND(){return"shape-round"}static get SHAPE_SQUARE(){return"shape-square"}static get VISIBILITY_DEAFULT(){return"visibility-default"}static get VISIBILITY_VISIBLE(){return"visibility-visible"}static get VISIBILITY_HIDDEN(){return"visibility-hidden"}static get SPACING_DEFAULT(){return"spacing-default"}static get SPACING_NONE(){return"spacing-none"}static get SPACING_ABOVE(){return"spacing-above"}static get SPACING_BELOW(){return"spacing-below"}static get SPACING_ABOVE_BELOW(){return"spacing-above-below"}constructor(){this.size=L.SIZE_DEFAULT,this.shape=L.SHAPE_DEAFULT,this.spacing=L.SPACING_DEFAULT,this.visibility=L.VISIBILITY_DEAFULT,this.locked=!1}withSize(t){return this.size=t,this}withShape(t){return this.shape=t,this}withSpacing(t){return this.spacing=t,this}withVisibility(t){return this.visibility=t,this}}class T{constructor(t=null){this.backgroundClickedListener=t&&t.getBackgroundClicked?t.getBackgroundClicked():null}withBackgroundClicked(t){return this.backgroundClickedListener=t,this}getBackgroundClicked(){return this.backgroundClickedListener}callBackgroundClicked(t){this.callListener(this.backgroundClickedListener,t)}callListener(t,e){null!=t&&t.call(e)}}new t("BackShade");class N{static get COMPONENT_NAME(){return"BackShade"}static get TEMPLATE_URL(){return"/assets/justrightjs-ui/backShade.html"}static get STYLES_URL(){return"/assets/justrightjs-ui/backShade.css"}constructor(t=new T){this.componentFactory=m.instance(i),this.component=null,this.eventRegistry=m.instance(o),this.container=null,this.backShadeListeners=t,this.hidden=!0}postConfig(){this.component=this.componentFactory.create(N.COMPONENT_NAME)}hideAfter(t){if(this.hidden)return new Promise(((t,e)=>{t()}));this.hidden=!0,this.component.get("backShade").setAttributeValue("class","back-shade fade");const s=e.asPromise(t,(()=>{this.component.get("backShade").setStyle("display","none")})),n=e.asPromise(t+1,(()=>{r.disableStyle(N.COMPONENT_NAME,this.component.componentIndex)}));return Promise.all([s,n])}show(){return this.hidden?(this.hidden=!1,r.enableStyle(N.COMPONENT_NAME,this.component.componentIndex),this.component.get("backShade").setStyle("display","block"),e.asPromise(100,(()=>{this.component.get("backShade").setAttributeValue("class","back-shade fade show")}))):new Promise(((t,e)=>{t()}))}}new t("BannerMessage");class b{static get COMPONENT_NAME(){return"BannerMessage"}static get TEMPLATE_URL(){return"/assets/justrightjs-ui/bannerMessage.html"}static get STYLES_URL(){return"/assets/justrightjs-ui/bannerMessage.css"}static get TYPE_ALERT(){return"type-alert"}static get TYPE_INFO(){return"type-info"}static get TYPE_SUCCESS(){return"type-success"}static get TYPE_WARNING(){return"type-warning"}constructor(t,e=b.TYPE_INFO,s=!1,n=null){this.componentFactory=m.instance(i),this.component=null,this.message=t,this.closeable=s,this.bannerType=e,this.eventRegistry=m.instance(o),this.onHideListener=null,this.onShowListener=null,this.customAppearance=n}postConfig(){this.component=this.componentFactory.create("BannerMessage"),this.component.get("bannerMessageHeader").setChild("Alert"),this.component.get("bannerMessageMessage").setChild(this.message),this.applyClasses("banner-message fade"),this.component.get("bannerMessageCloseButton").listenTo("click",new s(this,this.hide))}applyClasses(t){let e=t;e=e+" banner-message-"+this.bannerType,this.customAppearance&&(this.customAppearance.shape&&(e=e+" banner-message-"+this.customAppearance.shape),this.customAppearance.size&&(e=e+" banner-message-"+this.customAppearance.size),this.customAppearance.spacing&&(e=e+" banner-message-"+this.customAppearance.spacing)),this.component.get("bannerMessage").setAttributeValue("class",e)}applyHeader(t){this.header=t,this.component.get("bannerMessageHeader").setChild(this.header)}applyMessage(t){this.message=t,this.component.get("bannerMessageMessage").setChild(this.message)}remove(){return this.component.remove()}onHide(t){this.onHideListener=t}onShow(t){this.onShowListener=t}hide(){this.applyClasses("banner-message hide"),setTimeout((()=>{this.component.get("bannerMessage").setStyle("display","none")}),500),setTimeout((()=>{r.disableStyle(b.COMPONENT_NAME,this.component.componentIndex)}),501),this.onHideListener&&this.onHideListener.call()}show(t=null,e=null){t&&this.applyHeader(t),e&&this.applyMessage(e),r.enableStyle(b.COMPONENT_NAME,this.component.componentIndex),this.component.get("bannerMessage").setStyle("display","block"),setTimeout((()=>{this.applyClasses("banner-message show")}),100),this.onShowListener&&this.onShowListener.call()}}new t("Button");class C{static get COMPONENT_NAME(){return"Button"}static get TEMPLATE_URL(){return"/assets/justrightjs-ui/button.html"}static get STYLES_URL(){return"/assets/justrightjs-ui/button.css"}static get TYPE_PRIMARY(){return"button-primary"}static get TYPE_SECONDARY(){return"button-secondary"}static get TYPE_SUCCESS(){return"button-success"}static get TYPE_INFO(){return"button-info"}static get TYPE_WARNING(){return"button-warning"}static get TYPE_DANGER(){return"button-danger"}static get TYPE_LIGHT(){return"button-light"}static get TYPE_DARK(){return"button-dark"}constructor(t,e=null,s=C.TYPE_PRIMARY){this.componentFactory=m.instance(i),this.component=null,this.label=t,this.commonListeners=null!=e?e:new w,this.buttonType=s,this.eventRegistry=m.instance(o)}postConfig(){this.component=this.componentFactory.create("Button"),r.enableStyle(C.COMPONENT_NAME),this.component.get("button").setChild(this.label),this.component.get("button").setAttributeValue("class","button "+this.buttonType),this.component.get("button").listenTo("click",new s(this,this.clicked))}clicked(t){this.commonListeners.callClick(t)}enableLoading(){this.component.get("spinnerContainer").setAttributeValue("class","button-spinner-container-visible")}disableLoading(){this.component.get("spinnerContainer").setAttributeValue("class","button-spinner-container-hidden")}disable(){this.component.get("button").setAttributeValue("disabled","true")}enable(){this.component.get("button").removeAttribute("disabled")}}new t("DialogBox");class A{static get COMPONENT_NAME(){return"DialogBox"}static get TEMPLATE_URL(){return"/assets/justrightjs-ui/dialogBox.html"}static get STYLES_URL(){return"/assets/justrightjs-ui/dialogBox.css"}constructor(){this.eventRegistry=m.instance(o),this.componentFactory=m.instance(i),this.component=null,this.backShade=m.instance(N,[(new T).withBackgroundClicked(new s(this,this.hide))]),this.hidden=!0,this.swallowFocusEscape=!1,this.owningTrigger=null}postConfig(){this.component=this.componentFactory.create(A.COMPONENT_NAME),this.component.set("backShadeContainer",this.backShade.component),this.component.get("closeButton").listenTo("click",new s(this,this.hide)),a.listenToFocusEscape(new s(this,this.hide),this.component.get("dialogBoxWindow"))}setTitle(t){this.component.setChild("title",t)}setFooter(t){this.component.get("dialogBoxFooter").setStyle("display","block"),this.component.setChild("dialogBoxFooter",t)}setContent(t){this.component.setChild("dialogBoxContent",t)}set(t,e){this.component.set(t,e)}hide(t){if(this.hidden)return new Promise(((t,e)=>{t()}));this.hidden=!0,this.getDialogBoxWindow().setAttributeValue("class","dialogbox dialogbox-fade");const s=this.backShade.hideAfter(300),n=e.asPromise(200,(()=>{this.getDialogBoxWindow().setAttributeValue("class","dialogbox dialogbox-fade dialogbox-display-none")})),i=e.asPromise(201,(()=>{this.getDialogBox().remove(),r.disableStyle(A.COMPONENT_NAME,this.component.componentIndex)}));return Promise.all([n,i,s])}show(t){return a.swallowFocusEscape(500),this.hidden?(this.hidden=!1,r.enableStyle(A.COMPONENT_NAME,this.component.componentIndex),this.backShade.show(),this.getDialogBoxWindow().setAttributeValue("class","dialogbox dialogbox-fade dialogbox-display-block"),e.asPromise(100,(()=>{this.getDialogBoxWindow().setAttributeValue("class","dialogbox dialogbox-fade dialogbox-display-block dialogbox-show")}))):new Promise(((t,e)=>{t()}))}getDialogBoxWindow(){return this.component.get("dialogBoxWindow")}getDialogBox(){return this.component.get("dialogBox")}}new t("DropDownPanel");class M{static get COMPONENT_NAME(){return"DropDownPanel"}static get TEMPLATE_URL(){return"/assets/justrightjs-ui/dropDownPanel.html"}static get STYLES_URL(){return"/assets/justrightjs-ui/dropDownPanel.css"}static get TYPE_PRIMARY(){return" drop-down-panel-button-primary "}static get TYPE_SECONDARY(){return" drop-down-panel-button-secondary "}static get TYPE_SUCCESS(){return" drop-down-panel-button-success "}static get TYPE_INFO(){return" drop-down-panel-button-info "}static get TYPE_WARNING(){return" drop-down-panel-button-warning "}static get TYPE_DANGER(){return" drop-down-panel-button-danger "}static get TYPE_LIGHT(){return" drop-down-panel-button-light "}static get TYPE_DARK(){return" drop-down-panel-button-dark "}static get ORIENTATION_LEFT(){return" drop-down-panel-content-left"}static get ORIENTATION_RIGHT(){return" drop-down-panel-content-right"}static get CONTENT_VISIBLE(){return" drop-down-panel-content-visible "}static get CONTENT_HIDDEN(){return" drop-down-panel-content-hidden "}static get CONTENT_EXPAND(){return" drop-down-panel-content-expand "}static get CONTENT_COLLAPSE(){return" drop-down-panel-content-collapse "}static get CONTENT(){return" drop-down-panel-content "}static get BUTTON(){return" drop-down-panel-button "}constructor(t,e=M.TYPE_DARK,s=M.ORIENTATION_LEFT){this.componentFactory=m.instance(i),this.component=null,this.iconClass=t,this.type=e,this.orientation=s,this.eventRegistry=m.instance(o)}postConfig(){this.component=this.componentFactory.create(M.COMPONENT_NAME),r.enableStyle(M.COMPONENT_NAME),this.component.get("button").setChild(l.i("",this.iconClass)),this.component.get("button").setAttributeValue("class",M.BUTTON+this.type),this.component.get("content").setAttributeValue("class",M.CONTENT+M.CONTENT_HIDDEN+this.orientation),this.component.get("button").listenTo("click",new s(this,this.clicked)),a.listenToFocusEscape(new s(this,this.hide),this.component.get("dropDownPanelRoot"))}setPanelContent(t){this.component.get("content").setChild(t.component)}clicked(t){this.toggleContent()}toggleContent(){"block"!==this.component.get("arrow").getStyle("display")?this.show():this.hide()}show(){this.component.get("content").setAttributeValue("class",M.CONTENT+M.CONTENT_VISIBLE+this.orientation),this.component.get("arrow").setStyle("display","block"),this.component.get("content").element.focus()}hide(){this.component.get("content").setAttributeValue("class",M.CONTENT+M.CONTENT_HIDDEN+this.orientation),this.component.get("arrow").setStyle("display","none")}disable(){this.component.get("button").setAttributeValue("disabled","true")}enable(){this.component.get("button").removeAttribute("disabled")}}new t("CommonInput");class I{static get ON_CLICK(){return"click"}static get ON_KEYUP(){return"keyup"}static get ON_CHANGE(){return"change"}static get ON_BLUR(){return"blur"}constructor(t,e,s=null,n=null,r=null,a=null,l="input",c="error"){this.componentFactory=m.instance(i),this.component=null,this.validator=r,this.componentName=t,this.name=e,this.placeholder=a,this.inputElementId=l,this.errorElementId=c,this.model=s,this.commonListeners=null!=n?n:new w,this.eventRegistry=m.instance(o),this.tainted=!1}postConfig(){this.component=this.componentFactory.create(this.componentName),r.enableStyle(this.componentName,this.component.componentIndex),this.component.get(this.inputElementId).setAttributeValue("name",this.name),this.component.get(this.inputElementId).setAttributeValue("placeholder",this.placeholder),this.validator&&this.validator.withValidListener(new s(this,this.hideValidationError)),this.model&&c.link(this.model,this.validator).to(this.component.get(this.inputElementId)),this.registerListener(this.inputElementId,new s(this,this.entered),I.ON_KEYUP,(t=>t.isKeyCode(13))),this.registerListener(this.inputElementId,new s(this,this.keyupped),I.ON_KEYUP),this.registerListener(this.inputElementId,new s(this,this.changed),I.ON_CHANGE),this.registerListener(this.inputElementId,new s(this,this.blurred),I.ON_BLUR),this.registerListener(this.inputElementId,new s(this,this.clicked),I.ON_CLICK),this.registerListener(this.errorElementId,new s(this,this.errorClicked),I.ON_CLICK)}registerListener(t,e,n,i=null){let o=e;return i&&(o=new s(this,(t=>{i.call(this,t)&&e.call(t)}))),this.component.get(t).listenTo(n,o),this}keyupped(t){t.isKeyCode(13)||t.isKeyCode(16)||t.isKeyCode(9)||(this.tainted=!0),""===t.getTargetValue()&&(this.tainted=!1),this.commonListeners.callKeyUp(t)}changed(t){this.tainted=!0,""===t.getTargetValue()&&(this.tainted=!1),this.commonListeners.callChange(t)}clicked(t){this.commonListeners.callClick(t)}entered(t){if(!this.validator.isValid())return this.showValidationError(),void this.selectAll();this.commonListeners.callEnter(t)}blurred(t){this.tainted&&(this.validator.isValid()?(this.hideValidationError(),this.commonListeners.callBlur(t)):this.showValidationError())}errorClicked(t){this.hideValidationError()}showValidationError(){this.component.get(this.errorElementId).setStyle("display","block")}hideValidationError(){this.component.get(this.errorElementId).setStyle("display","none")}focus(){this.component.get(this.inputElementId).focus()}selectAll(){this.component.get(this.inputElementId).selectAll()}enable(){this.component.get(this.inputElementId).enable()}disable(){this.component.get(this.inputElementId).disable()}clear(){this.component.get(this.inputElementId).value="",this.tainted=!1,this.hideValidationError()}}new t("CheckBox");class P{static get COMPONENT_NAME(){return"CheckBox"}static get TEMPLATE_URL(){return"/assets/justrightjs-ui/checkBox.html"}static get STYLES_URL(){return"/assets/justrightjs-ui/checkBox.css"}constructor(t,e=null,s=null){this.componentFactory=m.instance(i),this.component=null,this.name=t,this.model=e,this.commonListeners=null!=s?s:new w,this.eventRegistry=m.instance(o)}postConfig(){this.component=this.componentFactory.create(P.COMPONENT_NAME),r.enableStyle(P.COMPONENT_NAME),this.component.get("checkBox").setAttributeValue("name",this.name),this.model&&c.link(this.model).to(this.component.get("checkBox"))}}new t("EmailInput");class _ extends I{static get COMPONENT_NAME(){return"EmailInput"}static get DEFAULT_PLACEHOLDER(){return"Email"}static get TEMPLATE_URL(){return"/assets/justrightjs-ui/emailInput.html"}static get STYLES_URL(){return"/assets/justrightjs-ui/emailInput.css"}constructor(t,e=null,s=null,n=TextInput.DEFAULT_PLACEHOLDER,i=!1){super(_.COMPONENT_NAME,t,e,s,new h(i,!i),n,"emailInput","emailError")}}new t("PasswordInput");class O extends I{static get COMPONENT_NAME(){return"PasswordInput"}static get DEFAULT_PLACEHOLDER(){return"Password"}static get TEMPLATE_URL(){return"/assets/justrightjs-ui/passwordInput.html"}static get STYLES_URL(){return"/assets/justrightjs-ui/passwordInput.css"}constructor(t,e=null,s=null,n=TextInput.DEFAULT_PLACEHOLDER,i=!1){super(O.COMPONENT_NAME,t,e,s,new u(!i),n,"passwordInput","passwordError")}}new t("PhoneInput");class S extends I{static get COMPONENT_NAME(){return"PhoneInput"}static get DEFAULT_PLACEHOLDER(){return"Phone"}static get TEMPLATE_URL(){return"/assets/justrightjs-ui/phoneInput.html"}static get STYLES_URL(){return"/assets/justrightjs-ui/phoneInput.css"}constructor(t,e=null,s=null,n=TextInput.DEFAULT_PLACEHOLDER,i=!1){super(S.COMPONENT_NAME,t,e,s,new d(i,!i),n,"phoneInput","phoneError")}}new t("PasswordMatcherInputValue");class y extends I{static get COMPONENT_NAME(){return"PasswordMatcherInputValue"}static get DEFAULT_PLACEHOLDER(){return"New password"}static get TEMPLATE_URL(){return"/assets/justrightjs-ui/passwordMatcherInputValue.html"}static get STYLES_URL(){return"/assets/justrightjs-ui/passwordMatcherInputValue.css"}constructor(t,e=null,s=null,n=TextInput.DEFAULT_PLACEHOLDER,i=!1){super(y.COMPONENT_NAME,t,e,s,new p(i),n,"passwordMatcherInputValueField","passwordMatcherInputValueError")}}new t("PasswordMatcherInputControl");class k extends I{static get COMPONENT_NAME(){return"PasswordMatcherInputControl"}static get DEFAULT_PLACEHOLDER(){return"Confirm password"}static get TEMPLATE_URL(){return"/assets/justrightjs-ui/passwordMatcherInputControl.html"}static get STYLES_URL(){return"/assets/justrightjs-ui/passwordMatcherInputControl.css"}constructor(t,e=null,s=null,n=null,i=TextInput.DEFAULT_PLACEHOLDER,o=!1){super(k.COMPONENT_NAME,t,e,n,new g(o,!1,e,s),i,"passwordMatcherInputControlField","passwordMatcherInputControlError")}}class R{constructor(){this.newPassword=null,this.controlPassword=null}setNewPassword(t){this.newPassword=t}getNewPassword(){return this.newPassword}setControlPassword(t){this.controlPassword=t}getControlPassword(){return this.controlPassword}}new t("PasswordMatcherInput");class D{static get COMPONENT_NAME(){return"PasswordMatcherInput"}static get TEMPLATE_URL(){return"/assets/justrightjs-ui/passwordMatcherInput.html"}static get STYLES_URL(){return"/assets/justrightjs-ui/passwordMatcherInput.css"}constructor(t,e=null,n=null,o=D.DEFAULT_PLACEHOLDER,r=D.DEFAULT_CONTROL_PLACEHOLDER,a=!1){this.componentFactory=m.instance(i),this.component=null,this.validator=null,this.passwordMatcherModel=new R,this.name=t,this.model=e,this.passwordMatcherInputValue=m.instance(y,["newPassword",this.passwordMatcherModel,(new w).withEnterListener(new s(this,this.passwordEntered)).withKeyUpListener(new s(this,this.passwordChanged)),o,a]),this.passwordMatcherInputControl=m.instance(k,["controlPassword",this.passwordMatcherModel,"newPassword",n,r,a])}postConfig(){this.component=this.componentFactory.create(D.COMPONENT_NAME),r.enableStyle(D.COMPONENT_NAME),this.component.setChild("passwordMatcherInputValue",this.passwordMatcherInputValue.component),this.component.setChild("passwordMatcherInputControl",this.passwordMatcherInputControl.component),this.validator=(new E).withValidator(this.passwordMatcherInputValue.validator).withValidator(this.passwordMatcherInputControl.validator).withValidListener(new s(this,this.passwordMatcherValidOccured))}passwordMatcherValidOccured(){n.setValue(this.model,this.name,this.passwordMatcherModel.getNewPassword())}passwordEntered(){this.passwordMatcherInputValue.validator.isValid()&&this.passwordMatcherInputControl.focus()}passwordChanged(){this.passwordMatcherInputControl.clear()}focus(){this.passwordMatcherInputValue.focus()}selectAll(){this.passwordMatcherInputValue.selectAll()}enable(){this.passwordMatcherInputValue.enable(),this.passwordMatcherInputControl.enable()}disable(){this.passwordMatcherInputValue.disable(),this.passwordMatcherInputControl.disable()}clear(){this.passwordMatcherInputValue.clear(),this.passwordMatcherInputControl.clear()}}new t("TextInput");class U extends I{static get COMPONENT_NAME(){return"TextInput"}static get DEFAULT_PLACEHOLDER(){return"Text"}static get TEMPLATE_URL(){return"/assets/justrightjs-ui/textInput.html"}static get STYLES_URL(){return"/assets/justrightjs-ui/textInput.css"}constructor(t,e=null,s=null,n=U.DEFAULT_PLACEHOLDER,i=!1){super(U.COMPONENT_NAME,t,e,s,new u(!1,i),n,"textInput","textError")}}export{N as BackShade,T as BackShadeListeners,b as BannerMessage,C as Button,P as CheckBox,I as CommonInput,w as CommonListeners,L as CustomAppearance,A as DialogBox,M as DropDownPanel,_ as EmailInput,O as PasswordInput,D as PasswordMatcherInput,k as PasswordMatcherInputControl,y as PasswordMatcherInputValue,R as PasswordMatcherModel,S as PhoneInput,U as TextInput};
